@(usuario: Usuario, titulo: String, fechaLimite: Date, tableroId: Long, mensaje: String)

  <script type="text/javascript">
    function getSizes() {
      var idTablero = document.getElementById("selectTablero").value
      var selectSize = document.getElementById("selectSize")
      while (selectSize.options.length > 1) {
          selectSize.remove(1);
      }
      if (idTablero != 0) {
        $.ajax({
            url: '/usuarios/@usuario.getId()/tableros/' + idTablero + '/sizes',
            type: 'GET',
            success: function(results) {
                //refresh the page
                for (var size of results) {
                  var opt = document.createElement('option')
                  opt.value = size.id
                  opt.innerHTML = size.nombre
                  selectSize.appendChild(opt)
                }
            }
        });
      }
    }

  </script>

@main("Nueva tarea", usuario) {
   @if(mensaje != "") {
       <div class="alert alert-danger">
           @mensaje
       </div>
   }
   <h1>Nueva tarea para @usuario.getLogin()</h1>
   @helper.form(action = routes.GestionTareasController.creaNuevaTarea(usuario.getId())) {
       <fieldset>
           <legend>Nueva tarea</legend>
           TÃ­tulo:  <input type="text" size=70 name="titulo" value= "@titulo"><br>
           Fecha Limite: <input type="date" size=70 name="fechaLimite" value='@fechaLimite'><br>
           Tablero: <select id="selectTablero" name="tableroId" onchange="getSizes()">
            <option value="0">null</option>
            @if(!usuario.getAdministrados().isEmpty()) {
              @for(tab <- usuario.getAdministrados()) {
                <option value="@tab.getId()">@tab.getNombre()</option>
              }
            }
            @if(!usuario.getTableros().isEmpty()) {
              @for(tab <- usuario.getTableros()) {
                <option value="@tab.getId()">@tab.getNombre()</option>
              }
            }
         </select>
         <br>
           Size: <select id="selectSize" name="sizeId">
            <option value="0">null</option>
         </select>
       </fieldset>
       <br>
       <p>
          <input type="submit" class="btn btn-primary" value="Guardar">
       </p>
   }
}
